[TOC]

# 结构化设计方法

结构化设计包括架构设计、接口设计、数据设计和过程设计等任务。它是一种面向数据流的设计方法，是以结构化分析阶段所产生的成果为基础，进一步自顶而下、逐步求精和模块化的过程。

结构化设计分为：

- 总体设计：确定系统的整体模块结构，即系统实现所需要的软件模块以及这些模块之间的调用关系。
- 详细设计：详细描述模块。

## 总体设计

为了实现设计目标，总体设计的任务是将DFD(数据流图)转化为MSD(模块结构图)。

### 数据流图分类

- 变换型数据流图：具有较明显的输入部分和变换部分之间的界面、变换部分和输入部分之间的数据流图。

![class_dataflow1](F:\work\软件工程\笔记\image\class_dataflow1.png)

- 事务型数据流图：在数据到达一个加工，该加工根据输入数据的值在其后的若干个动作序列中选出一个来执行，这类数据流图叫事务型数据流图。

![class_dataflow2](F:\work\软件工程\笔记\image\class_dataflow2.png)

### 变换数据流图的模块设计

1. 设计准备，复审精华系统模型。
2. 确定输入、变换、输出这三部分的边界。
3. 顶层设计：包含3个模块，输入模块，变换模块，输出模块。 

例子：

![model_design](F:\work\软件工程\笔记\image\model_design.png)

4. 二级分解，自顶向下，逐步求精
   - 对每个输入模块设计其下层模块
   - 对每一个输出模块设计其下层模块
   - 对变化模块进行分解

例子![model_design2](F:\work\软件工程\笔记\image\model_design2.png)

### 事务数据流图的模块设计

1. 设计准备，复审精华系统模型。
2. 确立事务中心
3. 顶层设计：
   - 为事务中心设计主模块
   - 对每一条活动路径设计一个事务模块
   - 对其输入部分设计一个输入模块
   - 如果一个事务数据流图的活动路径集中与一个加工，则设计一个输出模块，否则第一层不设计输出模块。

例子：

![model_design3](F:\work\软件工程\笔记\image\model_design3.png)

### 模块设计举例

现在有数字仪表系统的数据流图

![example1](F:\work\软件工程\笔记\image\example1.png)

顶层设计：

![example2](F:\work\软件工程\笔记\image\example2.png)

二级分解：

![example3](F:\work\软件工程\笔记\image\example3.png)

![example4](F:\work\软件工程\笔记\image\example4.png)

### 模块设计优劣评价

#### 基本原则

高内聚，低耦合。

#### 耦合

- 定义：不同模块之间相互依赖程度的度量。
- 因素：
  - 一个模块对另一个模块的引用
  - 一个模块向另一个模块传递的数据量
  - 一个模块施加到另一个模块控制的数量
  - 模块之间接口的复杂程度
- 类型（由强到弱）:
  - 内容耦合：一个模块直接修改或操作另一个模块的数据。
  - 公共耦合：两个以上的模块共同引用一个全局数据项。
  - 控制耦合：一个模块向另一个模块传递一个控制信号，接受信号的模块将依据该信号值进行必要的活动。
  - 标记耦合：两个模块至少有一个有一个通过界面传递的公共参数，包含内部结构。
  - 数据耦合：模块间通过参数传递基本类型数据

#### 内聚

- 定义：一个模块之内各个成分之间相互依赖程度的度量。

- 好的设计满足：

  - 模块功能单一
  - 模块各部分都和模块功能直接相关
  - 高内聚

- 内聚类型(由低到高)：

  - 偶然内聚：一个模块之内各成分之间没有任何关系。
  - 逻辑内聚：几个逻辑上相关的功能放在同一个模块中。
  - 时间内聚：一个模块完成的功能必须在同一时间内完成，而这些功能只是因为时间因素关联在一起。
  - 过程内聚：处理成分必须以特定的次序执行。
  - 通信内聚：各成分都操作在同一数据集或生成统一数据集。
  - 顺序内聚：各成分与一个功能相关，且一个成分的输出作为另一个成分输入。
  - 功能内聚：模块的所有成分对完成单一功能是最基本的，且是充分必要的。

  ![e1](F:\work\软件工程\笔记\image\e1.png)

  ![e2](F:\work\软件工程\笔记\image\e2.png)

#### 启发式规则

- 定义：根据设计准则，从长期软件开发实践中总结出来的规则。

- 常见的6种启发式规则：

  - 改进软件结构，提高模块独立性。
  - 模块规模适中-每一页60行语句：心理学表明：模块语句大于30行后，可理解性迅速下降。

  - 深度、宽度、扇入和扇出的适中：深度表示一个系统大小和复杂程度，也就是树高。宽度是指软件结构种同一层次上的模块总数的最大值，也就是树宽。扇入也就是多少个上级模块调用它。扇出：一个模块直接控制下级模块的数目。
  - 模块的作用域力争在控制域之内。
  - 降低模块接口的复杂性。模块功能应该可以预测。

### 界面设计

尽可能满足以下三种特性：

- 可使用性：这个是用户界面设计最重要的目标，包括使用简单，界面一致，拥有帮助功能，快速的系统响应和低的系统成本，容错能力等。
- 灵活性：考虑到用户的特点，能力和知识水平，应该使用用户接口满足不同用户的要求，因此对于不同的用户应该有不同的界面形式，但不同的界面形式不应当影响任务的完成。
- 可靠性：用户界面的可靠性是指无故障使用间隔时间。用户界面应当能保证用户正确，可靠的使用系统，保证有关程序和数据的安全。

## 详细设计

就是模块的设计，使用各种数据结构与算法实现。

## 软件设计规约

软件设计规约对软件的组织或其组成部分的内部结构的描述，满足系统需求规约所指定的全部功能以及性能要求。

其组成通常有**概要设计规约**和**详细设计规约**组成。

### 概要设计规约

1. 系统环境：
   - 硬件、软件接口与人机界面
   - 外部定义的数据库
   - 与设计有关的限定
2. 设计描述
   - 数据流和主要的数据结构
   - 软件模块的结构
   - 模块之间的接口
3. 每个模块的描述
   - 处理过程外部行为
   - 界面定义
   - 数据结构
   - 必要的注解
4. 文件结构和全局数据
   - 文件的逻辑结构、记录描述以及访问方式
   - 交叉引用信息

软件概要设计是面向软件开发者的文档，主要作为软件项目管理人员、系统分析人员与设计人员之间交流的媒体。

软件概要规约是做系统测试的依据





### 详细设计规约

详细设计规约是对软件各个组成部分内部属性的描述，它是概要设计的细化。即在概要设计规约的基础上，增加以下内容：

1. 各处理过程的算法。
2. 算法所设计的全部数据结构的描述，特别的，对主要数据结构往往包括与算法实现有关的描述。

软件详细规约是做单元测试的依据。



### 设计规约的格式

#### 1. 引言

1. 编写目的
   - 说明编写本软件设计说明书的目的。
2. 背景说明
   - 给出待开发的软件产品名称
   - 说明本项目的提出者、开发者以及用户
   - 说明该软件产品做什么
3. 术语定义
   - 列出本文档中所用的专门的术语定义。
4. 参考资料
   - 列出本文档中所引用的全部资料，包括标题、文档编号、版本号、出版日期、出版单位等，必要时注明资料的来源。

#### 2. 总体设计

1. 需求规定
   - 说明对本软件主要输入、输出、处理的功能以及性能需求。
2. 运行环境
   - 简要说明本软件运行的软件、硬件环境和支持环境的要求。
3. 处理流程
   - 说明本软件的处理流程，尽量用图文表的形式。
4. 软件结构
   - 在DFD图基础上，用模块图来说明各个模块的划分以及相互关系，划分原则上应当细到程序级，每个单元必须执行一个独立功能。

#### 3. 运行设计

1. 运行模块的组合：
   - 说明对系统施加不同的外界运行控制时所引起的各种不同的运行模块的组合，说明每种运行所经历的内部模块和支持软件。
2. 运行控制
   - 说明运行的控制方式、方法和具体的操作步骤。

#### 4. 系统出错处理

1. 出错信息简要说明每种可能的出错或故障情况出现时，系统输出信息的格式和含义。
2. 出错处理方法和补救措施，包括：
   - 后备技术：当原始系统数据万一丢失时启动的副本的建立和启动的技术，如周期性信息转储。
   - 性能降级：使用另一个效率稍低的系统或方法，以求得所需结果的某些部分
   - 恢复和再启动。用建立恢复点等技术，使得软件再开始运行。

#### 5. 模块设计说明

填写模块说明表的形式，对每个模块给出下述内容：

1. 模块的一般说明，包括名称、编号、设计者、所在文件、所在库、调用本模块的名称以及其他模块名称。
2. 功能概述
3. 处理描述，使用伪代码描述本模块的算法。
4. 引用格式
5. 返回值
6. 内部接口，包括本软件内部各个模块接口关系，包括：
   - 名称
   - 意义
   - 数据类型
   - 有效范围
   - io标志

### 设计规约的格式

#### 设计评审

就是对设计文档的评审。对于软件设计来说，评审与其技术设计方法本身是一样重要的，评审对于研制项目的成功而言是绝对必要的。

概要设计审查表：

- 软件体系结构是否反映了软件需求。
- 达到高模块化吗？模块功能独立吗？
- 模块与外部系统元素接口定义了吗？
- 数据结构与软件需求一致吗？
- 考虑了可维护性吗？
- 是否直接评价了质量因素？

详细设计评审检查表：

- 算法能完成所要求的功能吗？
- 算法逻辑正确吗？
- 接口与体系结构设计一致吗？
- 逻辑的复杂性合理吗？
- 是否规定了错误处理和反故障处理？
- 正确定义局部数据结构吗？
- 使用了结构化变成构造吗？
- 设计的细节适用于现实语言吗？
- 用的是哪个操作系统？
- 考虑到可维护性吗？